### 浏览器相关的面试题
#### 1. 说一说浏览器缓存
[浏览器资源的加载与解析的影响与原因](https://www.jianshu.com/p/2bc93efe0958)
#### 学习笔记
   1. 浏览器的渲染过程
      + 解析html生成dom树，解析css生成cssOm树
      + dom树和cssom树构建成render树
      + 布局render树
      + 绘制render树
   2. css加载相关
      + csss的解析和加载不会阻塞html的解析。解析dom树的过程和样式表解析成cssDom树的过程是并行的。
      + css解析会阻塞渲染树的生成。
      + 即使link标签的media属性的值不符合当前设备，浏览器仍会加载其对应的css文件。
   3. javascript
      + 所有的js执行都会阻塞html的解析，即使设置了defer或async也是一样的
      + defer和async属性对于inline-script都是无效的。
      + 浏览器不会并行加载多个没有设置defer或async的js资源
      + saync和defer的区别：这两个属性都会使script异步加载，sync会在加载完之后直接执行，而defer会等到html解析完成之后才会执行js代码。
      + js只能获取到存在dom树上的元素，而伪元素并不存在于dom树上，而是存在于渲染树上。
   4. 媒体资源的加载（图片音视频）
      + 图片的加载不会阻塞html的解析，媒体资源的加载是并行加载的。
-------
[浏览器工作原理详解](https://blog.csdn.net/dangnian/article/details/50876241)
#### 学习笔记
   1. 
-------
[浏览器的多进程](https://blog.csdn.net/sh435367384/article/details/79647326)
#### 学习笔记
   1. 浏览器的多进程包括
      + Browser进程：浏览器的主进程，只有一个。作用有：
         1. 负责浏览器界面的显示，与用户交互。
         2. 负责各个页面的管理，创建和销毁其他进程。
         3. 将renderer进程得到的内存中的bitmap，绘制到用户界面
         4. 网络资源的管理，下载等。
   2. 第三方插件进程：
   3. GPU进程：最多一个，用于3D绘制等。
   4. 浏览器渲染进程（浏览器内核）：默认每个Tab页面一个进程，互不影响，主要作用为：页面渲染，脚本执行，事件处理等。
   + 浏览器渲染进程：
      1. GUI渲染进程：
         + 负责渲染浏览器界面，解析HTML,css,构建DOM树和renderObject树，布局和绘制。
         + 当界面需要绘制或者某种操作引发回流时，就会执行。
         + 注意 gui渲染进程和js引擎线程是互斥的，当js引擎执行时GUI线程就会挂起，GUI更新会被保存在一个队列中等待js引擎空闲时立即执行。
      2. js引擎线程：
         + 也成为js内核，负责处理js脚本程序
         + js引擎程序负责解析javascript脚本，运行代码。
         + js引擎一直等着任务队列中任务的到来，然后加以处理
      3. 事件触发现场：
         + 归属于浏览器而不是js引擎，用来控制事件循环（js引擎自己都忙不过来，需要浏览器另开线程协助）
         + js引擎指向代码块如setTimeout(鼠标点击，ajax异步请求等)，会将对应任务添加到事件线程
      4. 定时器线程：
         + 传说中的setInterval和setTimeout线程
         + 浏览器定时计数器并不是js引擎计数的
         +setTimeout中低于4ms的时间间隔算为4ms
      5. 异步http请求线程。
    + 浏览器进程和浏览器内核的通信进程
       + 浏览器进程受到用户请求，首先要获取到页面内容，随后将任务传递给render进程
       + render进程简单解释后，交给渲染线程，然后开始渲染
       + 渲染线程受到请求，加载页面并渲染页面。
    + javascript的单线程，与它的用途有关，做为浏览器脚本语言，js的主要用途是与用户交互，以及操作dom，这也决定了它只能是单线程，否则会带来很复杂的同步问题。
#### 渲染相关的知识点：
   1. 图层
      + 一般来说，可以把普通文档流看成一个图层，特定的属性可以生成一个新的图层。不同图层的渲染互不影响，所以某些频繁需要渲染的建议单独生成一个新图层，提高性能。
      + 通过以下的几个常见属性可以生成新图层
         1. 3D变换，translate3D,translateZ
         2. will-change
         3. video iframe
         4. position fixed
         5. 通过动画实现的opacity动画转换。
    2. 回流和重绘
       + 重绘是当节点需要更改外观而不会影响布局时，比如改变color
       + 回流时布局或者集合属性需要改变
       + 回流必然导致重绘，重绘不一定会引发回流，回流所需的成本比重绘高得多，
       + 当event loop执行完microtasks后，会判断document是否需要更新，因为浏览器是60Hz刷新频率，每16ms才会更新一次。
       + 然后判断是否有resize或者scroll
       + 常见的引发回流属性和方法
          1. 添加或者删除可见的DOM元素
          2. 元素尺寸改变
          3. 内容变化。浏览器窗口尺寸改变
          4. 计算offsetWidth offsetHeight
          5. 设置style属性的值
       + 减少回流和重绘的方法
          1. 使用translate替代top
          2. 使用visibility替换display:none
          3. 不要使用table布局
          4. css选择符从右向左匹配查找，避免dom深度过深
          5. 将频繁运行的动画变成图层。
* 强缓存
  + 不需要发送http请求，通过相应的字段来检查，http1.0是experies,http1.1是cache-control
  + experies有一个坑就是浏览器时间可能和服务器时间不一致，就会导致判断不准确。
  + cache-control有很多的关键字，
    1. private 只能浏览器缓存，中间的代理服务器不能缓存
    2. public 浏览器和中间的代理服务器都能缓存。
    3

